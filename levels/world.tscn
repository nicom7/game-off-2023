[gd_scene load_steps=9 format=3 uid="uid://b7huf0srkra04"]

[ext_resource type="Script" path="res://levels/world.gd" id="1_u7smd"]
[ext_resource type="PackedScene" uid="uid://bfbbc1lm3doy7" path="res://game_objects/audio/ambient_note_player.tscn" id="2_573sm"]
[ext_resource type="TileSet" uid="uid://bm8j5kvkieyqj" path="res://tilesets/environment.tres" id="3_d11al"]
[ext_resource type="PackedScene" uid="uid://dqk2pedcucgnw" path="res://characters/player/player.tscn" id="6_ahra0"]
[ext_resource type="PackedScene" uid="uid://dbwx5x1x0vi2d" path="res://game_objects/switch_blocks/switch_block.tscn" id="7_ki10g"]
[ext_resource type="PackedScene" uid="uid://cfqdgrh4lw7pi" path="res://game_objects/switch_blocks/block_sequence.tscn" id="7_v4u45"]
[ext_resource type="PackedScene" uid="uid://knuujq4ac74r" path="res://game_objects/ladders/ladder.tscn" id="8_y3bu1"]
[ext_resource type="PackedScene" uid="uid://bxun5w5sv6twu" path="res://game_objects/walls/wall.tscn" id="9_w7oqa"]

[node name="World" type="Node2D"]
script = ExtResource("1_u7smd")
ambient_note_player_scene = ExtResource("2_573sm")

[node name="Platforms" type="TileMap" parent="."]
texture_filter = 3
tile_set = ExtResource("3_d11al")
format = 2
layer_0/name = "Platform 1"
layer_0/tile_data = PackedInt32Array(786432, 65536, 2, 786433, 131072, 2, 786434, 131072, 2, 786435, 131072, 2, 786436, 131072, 2, 786437, 131072, 2, 786438, 131072, 2, 786439, 131072, 2, 786440, 131072, 2, 786441, 131072, 2, 786442, 131072, 2, 720896, 65536, 0, 720897, 131072, 0, 720898, 131072, 0, 720899, 131072, 0, 720900, 131072, 0, 720901, 131072, 0, 720902, 131072, 0, 720903, 131072, 0, 720904, 131072, 0, 720905, 131072, 0, 720906, 131072, 0, 458764, 196608, 0, 458760, 65536, 0, 458761, 131072, 0, 458762, 131072, 0, 458763, 131072, 0, 524296, 65536, 2, 524297, 131072, 2, 524298, 131072, 2, 524299, 131072, 2, 524300, 196608, 2, 393220, 196608, 2, 327684, 196608, 0, 327683, 65536, 0, 393219, 65536, 2, 720907, 131072, 0, 786443, 131072, 2, 786444, 131072, 2, 786445, 131072, 2, 786446, 131072, 2, 786447, 131072, 2, 786448, 131072, 2, 786449, 131072, 2, 786450, 131072, 2, 786451, 131072, 2, 786452, 131072, 2, 786453, 131072, 2, 786454, 131072, 2, 786455, 196608, 2, 720919, 196608, 0, 720918, 131072, 0, 720917, 131072, 0, 720916, 131072, 0, 720915, 131072, 0, 720914, 131072, 0, 720908, 131072, 0, 720913, 131072, 0, 720912, 131072, 0, 720911, 131072, 0, 720910, 131072, 0, 720909, 131072, 0)
layer_1/name = "Platform 2"
layer_1/enabled = true
layer_1/modulate = Color(1, 1, 1, 1)
layer_1/y_sort_enabled = false
layer_1/y_sort_origin = 0
layer_1/z_index = 0
layer_1/tile_data = PackedInt32Array(458758, 196608, 2, 393222, 196608, 0, 393221, 65536, 0, 458757, 65536, 2, 196621, 65536, 0, 196622, 131072, 0, 196623, 131072, 0, 196624, 131072, 0, 196625, 131072, 0, 196626, 131072, 0, 196627, 196608, 0, 262163, 196608, 2, 262162, 131072, 2, 262161, 131072, 2, 262160, 131072, 2, 262159, 131072, 2, 262158, 131072, 2, 262157, 65536, 2, 589843, 65536, 0, 655379, 65536, 2, 655380, 131072, 2, 655381, 131072, 2, 655382, 131072, 2, 655383, 196608, 2, 589847, 196608, 0, 589846, 131072, 0, 589845, 131072, 0, 589844, 131072, 0, 589838, 65536, 0, 655374, 65536, 2, 655375, 131072, 2, 655376, 131072, 2, 655377, 196608, 2, 589841, 196608, 0, 589840, 131072, 0, 589839, 131072, 0)
layer_2/name = "Tones"
layer_2/enabled = true
layer_2/modulate = Color(1, 1, 1, 1)
layer_2/y_sort_enabled = false
layer_2/y_sort_origin = 0
layer_2/z_index = 0
layer_2/tile_data = PackedInt32Array(786432, 65539, 2, 786433, 131075, 2, 786434, 131075, 2, 786435, 131075, 2, 786436, 131075, 2, 786437, 131075, 2, 786438, 131075, 2, 786439, 131075, 2, 786440, 131075, 2, 786441, 131075, 2, 786442, 131075, 2, 720906, 131075, 0, 720905, 131075, 0, 720904, 131075, 0, 720903, 131075, 0, 720902, 131075, 0, 720901, 131075, 0, 720900, 131075, 0, 720899, 131075, 0, 720898, 131075, 0, 720897, 131075, 0, 720896, 65539, 0, 720909, 131075, 0, 720910, 131075, 0, 720911, 131075, 0, 720912, 131075, 0, 720913, 131075, 0, 655379, 65541, 2, 589843, 65541, 0, 589844, 131077, 0, 589845, 131077, 0, 589846, 131077, 0, 589847, 196613, 0, 655383, 196613, 2, 655382, 131077, 2, 655381, 131077, 2, 655380, 131077, 2, 458760, 65541, 0, 458761, 131077, 0, 458762, 131077, 0, 458763, 131077, 0, 458764, 196613, 0, 524300, 196613, 2, 524299, 131077, 2, 524298, 131077, 2, 524297, 131077, 2, 524296, 65541, 2, 458758, 196615, 2, 393222, 196615, 0, 393221, 65543, 0, 458757, 65543, 2, 393220, 196614, 2, 327684, 196614, 0, 327683, 65542, 0, 393219, 65542, 2, 262157, 65542, 2, 196621, 65542, 0, 196622, 131078, 0, 196623, 131078, 0, 196624, 131078, 0, 196625, 131078, 0, 196626, 131078, 0, 196627, 196614, 0, 262163, 196614, 2, 262162, 131078, 2, 262161, 131078, 2, 262160, 131078, 2, 262159, 131078, 2, 262158, 131078, 2, 720907, 131075, 0, 786443, 131075, 2, 786444, 131075, 2, 786445, 131075, 2, 786446, 131075, 2, 786447, 131075, 2, 786448, 131075, 2, 786449, 131075, 2, 786450, 131075, 2, 786451, 131075, 2, 786452, 131075, 2, 786453, 131075, 2, 786454, 131075, 2, 786455, 196611, 2, 720919, 196611, 0, 720918, 131075, 0, 720917, 131075, 0, 720916, 131075, 0, 720915, 131075, 0, 720914, 131075, 0, 720908, 131075, 0, 589838, 65540, 0, 655374, 65540, 2, 655375, 131076, 2, 655376, 131076, 2, 655377, 196612, 2, 589841, 196612, 0, 589840, 131076, 0, 589839, 131076, 0)

[node name="Player" parent="." node_paths=PackedStringArray("current_floor_map") instance=ExtResource("6_ahra0")]
unique_name_in_owner = true
position = Vector2(96, 492)
current_floor_map = NodePath("../Platforms")

[node name="Ladder" parent="." instance=ExtResource("8_y3bu1")]
position = Vector2(432, 336)
climb_up_action = "E_note"
climb_down_action = "C_note"
size = 4

[node name="Ladder2" parent="." instance=ExtResource("8_y3bu1")]
position = Vector2(768, 144)
climb_up_action = "F_note"
climb_down_action = "D_note"
size = 6

[node name="Walls" type="Node2D" parent="."]

[node name="Floor" parent="Walls" instance=ExtResource("9_w7oqa")]
position = Vector2(576, 648)

[node name="LeftWall" parent="Walls" instance=ExtResource("9_w7oqa")]
position = Vector2(0, 288)
rotation = 1.5708

[node name="RightWall" parent="Walls" instance=ExtResource("9_w7oqa")]
position = Vector2(1152, 288)
rotation = -1.5708

[node name="BlockSequence" parent="." instance=ExtResource("7_v4u45")]

[node name="SwitchBlockC" parent="BlockSequence" instance=ExtResource("7_ki10g")]
modulate = Color(1, 1, 0, 1)
position = Vector2(624, 384)
tone = 2

[node name="SwitchBlockE" parent="BlockSequence" instance=ExtResource("7_ki10g")]
modulate = Color(0, 1, 1, 1)
position = Vector2(528, 192)
tone = 4

[node name="SwitchBlockF" parent="BlockSequence" instance=ExtResource("7_ki10g")]
modulate = Color(0, 0.5, 1, 1)
position = Vector2(672, 0)
tone = 5

[node name="SwitchBlockG" parent="BlockSequence" instance=ExtResource("7_ki10g")]
modulate = Color(1, 0, 1, 1)
position = Vector2(240, 144)
tone = 6

[node name="NewBlockSequenceTimer" type="Timer" parent="."]
wait_time = 2.0
one_shot = true

[node name="TestBlocks" type="Node2D" parent="."]
process_mode = 4
visible = false

[node name="SwitchBlockA" parent="TestBlocks" instance=ExtResource("7_ki10g")]
position = Vector2(48, 384)

[node name="SwitchBlockB" parent="TestBlocks" instance=ExtResource("7_ki10g")]
modulate = Color(1, 0.5, 0, 1)
position = Vector2(96, 384)
tone = 1

[node name="SwitchBlockC" parent="TestBlocks" instance=ExtResource("7_ki10g")]
modulate = Color(1, 1, 0, 1)
position = Vector2(144, 384)
tone = 2

[node name="SwitchBlockD" parent="TestBlocks" instance=ExtResource("7_ki10g")]
modulate = Color(0, 1, 0, 1)
position = Vector2(192, 384)
tone = 3

[node name="SwitchBlockE" parent="TestBlocks" instance=ExtResource("7_ki10g")]
modulate = Color(0, 1, 1, 1)
position = Vector2(240, 384)
tone = 4

[node name="SwitchBlockF" parent="TestBlocks" instance=ExtResource("7_ki10g")]
modulate = Color(0, 0.5, 1, 1)
position = Vector2(288, 384)
tone = 5

[node name="SwitchBlockG" parent="TestBlocks" instance=ExtResource("7_ki10g")]
modulate = Color(1, 0, 1, 1)
position = Vector2(336, 384)
tone = 6

[node name="CameraCenter" type="Marker2D" parent="."]
unique_name_in_owner = true
position = Vector2(576, 312)

[node name="Camera2D" type="Camera2D" parent="."]
unique_name_in_owner = true
position_smoothing_speed = 4.0
drag_left_margin = 0.1
drag_top_margin = 0.1
drag_right_margin = 0.1
drag_bottom_margin = 0.1

[connection signal="current_tone_changed" from="Player" to="." method="_on_player_current_tone_changed"]
[connection signal="on_floor_changed" from="Player" to="." method="_on_player_on_floor_changed"]
[connection signal="finished" from="BlockSequence" to="." method="_on_block_sequence_finished"]
[connection signal="sequence_finished" from="BlockSequence" to="." method="_on_block_sequence_sequence_finished"]
[connection signal="sequence_played" from="BlockSequence" to="." method="_on_block_sequence_sequence_played"]
[connection signal="timeout" from="NewBlockSequenceTimer" to="." method="_on_new_block_sequence_timer_timeout"]
