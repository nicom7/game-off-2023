[gd_scene load_steps=55 format=3 uid="uid://b24jmtuqoaeq6"]

[ext_resource type="Script" path="res://main.gd" id="1_dgxr5"]
[ext_resource type="Material" uid="uid://dijyat7omg1fg" path="res://shaders/blur_material.tres" id="2_l5wfl"]
[ext_resource type="PackedScene" uid="uid://bjyrekj7d6cal" path="res://gui/hud.tscn" id="2_tqktt"]
[ext_resource type="Script" path="res://levels/transition.gd" id="3_ny1lb"]
[ext_resource type="PackedScene" uid="uid://bl5x0vjmi2ghe" path="res://gui/in_game_menu.tscn" id="3_woyqp"]
[ext_resource type="Script" path="res://levels/level_manager.gd" id="6_10awd"]
[ext_resource type="Script" path="res://levels/random_level_info.gd" id="7_2r6pw"]
[ext_resource type="Resource" uid="uid://b3gv1i0ttbhog" path="res://levels/level_infos/level_tutorial_c_d.tres" id="7_6lnhu"]
[ext_resource type="Resource" uid="uid://bk7diaeenvhba" path="res://levels/level_infos/levels_1_to_4.tres" id="7_swa47"]
[ext_resource type="Resource" uid="uid://xbtv2efpt7yu" path="res://levels/level_infos/level_tutorial_d_c.tres" id="8_j0ghc"]
[ext_resource type="Resource" uid="uid://dairla6s3rwbv" path="res://levels/level_infos/levels_5_to_8.tres" id="9_0vo6u"]
[ext_resource type="Resource" uid="uid://cws2pig1pr6dg" path="res://levels/level_infos/level_tutorial_c_d_e.tres" id="9_tx7u8"]
[ext_resource type="Resource" uid="uid://d2jd4h4e80b8y" path="res://levels/level_infos/levels_13_to_16.tres" id="10_dypps"]
[ext_resource type="Resource" uid="uid://cscbvfqkb11j7" path="res://levels/level_infos/levels_9_to_12.tres" id="10_v8k3x"]
[ext_resource type="Resource" uid="uid://l1g6ee6cn32r" path="res://levels/level_infos/levels_17_to_20.tres" id="11_e8qcc"]
[ext_resource type="Resource" uid="uid://b5g0767blh1hv" path="res://levels/level_infos/level_accidentals_tutorial.tres" id="11_xqxel"]
[ext_resource type="Resource" uid="uid://4medl6mrpng1" path="res://levels/level_infos/levels_21_to_24.tres" id="12_hm2f0"]
[ext_resource type="Resource" uid="uid://hhlbue0uxe3j" path="res://levels/level_infos/levels_25_to_28.tres" id="13_a5w1c"]
[ext_resource type="Resource" uid="uid://dvj6luy8yapbd" path="res://levels/level_infos/levels_29_to_32.tres" id="14_tvlkx"]
[ext_resource type="Resource" uid="uid://vb68stjnq17" path="res://levels/level_infos/levels_33_to_36.tres" id="15_uux5b"]
[ext_resource type="Resource" uid="uid://cl344rmbl5dg2" path="res://levels/level_infos/level_c_major.tres" id="17_qqbmw"]
[ext_resource type="Resource" uid="uid://cq2qo3vej37in" path="res://levels/scales/no_accidentals/blues_major_pentatonic.tres" id="18_wdpug"]
[ext_resource type="Resource" uid="uid://cmfsibugya1o" path="res://levels/scales/no_accidentals/ionian.tres" id="19_375dd"]
[ext_resource type="Resource" uid="uid://cphl3kn807rbj" path="res://levels/scales/no_accidentals/major_pentatonic.tres" id="20_1ykna"]
[ext_resource type="Resource" uid="uid://cnyxmh6h8ky6g" path="res://levels/scales/no_accidentals/p1_maj2_p5.tres" id="21_l2rt3"]
[ext_resource type="Resource" uid="uid://c68qfrm1lajoc" path="res://levels/scales/no_accidentals/p1_maj3_p5.tres" id="22_f0aur"]
[ext_resource type="Resource" uid="uid://bn3j6huekby7l" path="res://levels/scales/no_accidentals/p1_maj3_p5_maj6.tres" id="23_icpk3"]
[ext_resource type="Resource" uid="uid://en044rmdngq2" path="res://levels/scales/no_accidentals/p1_maj3_p5_maj7.tres" id="24_we8ay"]
[ext_resource type="Resource" uid="uid://dtdlnk3712jt7" path="res://levels/scales/no_accidentals/p1_p4_p5.tres" id="25_sel56"]
[ext_resource type="Resource" uid="uid://dltis3n7ped7h" path="res://levels/scales/no_accidentals/p1_p5.tres" id="26_8j8hq"]
[ext_resource type="Resource" uid="uid://dclfo2koy6pk2" path="res://levels/scales/accidentals/augmented.tres" id="27_dk7fx"]
[ext_resource type="Resource" uid="uid://d0e8ayq7wdlpg" path="res://levels/scales/accidentals/blues_minor_pentatonic.tres" id="28_deyo0"]
[ext_resource type="Resource" uid="uid://ctla1daquvl60" path="res://levels/scales/accidentals/chromatic.tres" id="29_cu4kb"]
[ext_resource type="Resource" uid="uid://bgopvbqk5dxb0" path="res://levels/scales/accidentals/double_harmonic.tres" id="30_1jv20"]
[ext_resource type="Resource" uid="uid://bh0ebwlcxvg8v" path="res://levels/scales/accidentals/harmonic_minor.tres" id="31_acmfr"]
[ext_resource type="Resource" uid="uid://i5yowl5qkuxa" path="res://levels/scales/accidentals/melodic_minor.tres" id="32_0wo1y"]
[ext_resource type="Resource" uid="uid://bu6lrj236wv4w" path="res://levels/scales/accidentals/minor_pentatonic.tres" id="33_qtvj2"]
[ext_resource type="Resource" uid="uid://buacs7hpjk5e2" path="res://levels/scales/accidentals/p1_maj3_a5.tres" id="34_f2anf"]
[ext_resource type="Resource" uid="uid://rf5gd0meqkab" path="res://levels/scales/accidentals/p1_maj3_p5_min7.tres" id="35_50pp8"]
[ext_resource type="Resource" uid="uid://cidl727rgfdsl" path="res://levels/scales/accidentals/p1_min3_d5.tres" id="36_pxh7t"]
[ext_resource type="Resource" uid="uid://crkvgjoxujia8" path="res://levels/scales/accidentals/p1_min3_p5.tres" id="37_kknqh"]
[ext_resource type="Resource" uid="uid://dh5i8exu0dmab" path="res://levels/scales/accidentals/p1_min3_p5_maj6.tres" id="38_rx6dy"]
[ext_resource type="Resource" uid="uid://cjogetx8e1p1w" path="res://levels/scales/accidentals/p1_min3_p5_maj7.tres" id="39_j0x8n"]
[ext_resource type="Resource" uid="uid://cwmgqw18imuj5" path="res://levels/scales/accidentals/p1_min3_p5_min7.tres" id="40_42jqr"]
[ext_resource type="Resource" uid="uid://dfnu6855bf140" path="res://levels/scales/accidentals/suspended_pentatonic.tres" id="41_ktbga"]
[ext_resource type="Resource" uid="uid://c6nhsyctqi6y3" path="res://levels/scales/accidentals/whole_tone.tres" id="42_4y3mq"]

[sub_resource type="Gradient" id="Gradient_4wmm2"]
offsets = PackedFloat32Array(1)
colors = PackedColorArray(1, 1, 1, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_3r7dh"]
gradient = SubResource("Gradient_4wmm2")

[sub_resource type="Animation" id="Animation_r6suw"]
resource_name = "fade_in"
length = 3.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ColorRect:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 3),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0, 0, 0, 1), Color(0, 0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:master_volume")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 3),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [-80.0, 0.0]
}

[sub_resource type="Animation" id="Animation_7o5kq"]
resource_name = "fade_out"
length = 4.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ColorRect:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 4),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0, 0, 0, 0), Color(0, 0, 0, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:master_volume")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 4),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, -80.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_2k50g"]
_data = {
"fade_in": SubResource("Animation_r6suw"),
"fade_out": SubResource("Animation_7o5kq")
}

[sub_resource type="Resource" id="Resource_qn6nn"]
script = ExtResource("7_2r6pw")
note_count_min = 12
note_count_max = 12
random_tonic = true
random_inversion = true
scale_infos = Array[Resource("res://levels/scale_info.gd")]([ExtResource("18_wdpug"), ExtResource("19_375dd"), ExtResource("20_1ykna"), ExtResource("21_l2rt3"), ExtResource("22_f0aur"), ExtResource("23_icpk3"), ExtResource("24_we8ay"), ExtResource("25_sel56"), ExtResource("26_8j8hq"), ExtResource("27_dk7fx"), ExtResource("28_deyo0"), ExtResource("29_cu4kb"), ExtResource("30_1jv20"), ExtResource("31_acmfr"), ExtResource("32_0wo1y"), ExtResource("33_qtvj2"), ExtResource("34_f2anf"), ExtResource("35_50pp8"), ExtResource("36_pxh7t"), ExtResource("37_kknqh"), ExtResource("38_rx6dy"), ExtResource("39_j0x8n"), ExtResource("40_42jqr"), ExtResource("41_ktbga"), ExtResource("42_4y3mq")])
stage_count_max = 7
notes_per_stage_max = 2
sequence_length_max = 8
level_scene_path = "res://levels/world_a6.tscn"
regenerate = false

[sub_resource type="Resource" id="Resource_4iyos"]
script = ExtResource("7_2r6pw")
note_count_min = 5
note_count_max = 7
random_tonic = true
random_inversion = true
scale_infos = Array[Resource("res://levels/scale_info.gd")]([ExtResource("18_wdpug"), ExtResource("19_375dd"), ExtResource("20_1ykna"), ExtResource("21_l2rt3"), ExtResource("22_f0aur"), ExtResource("23_icpk3"), ExtResource("24_we8ay"), ExtResource("25_sel56"), ExtResource("26_8j8hq"), ExtResource("27_dk7fx"), ExtResource("28_deyo0"), ExtResource("29_cu4kb"), ExtResource("30_1jv20"), ExtResource("31_acmfr"), ExtResource("32_0wo1y"), ExtResource("33_qtvj2"), ExtResource("34_f2anf"), ExtResource("35_50pp8"), ExtResource("36_pxh7t"), ExtResource("37_kknqh"), ExtResource("38_rx6dy"), ExtResource("39_j0x8n"), ExtResource("40_42jqr"), ExtResource("41_ktbga"), ExtResource("42_4y3mq")])
stage_count_max = 7
notes_per_stage_max = 2
sequence_length_max = 8
level_scene_path = "res://levels/world_a6.tscn"
regenerate = false

[sub_resource type="Resource" id="Resource_gaviw"]
script = ExtResource("7_2r6pw")
note_count_min = 5
note_count_max = 7
random_tonic = true
random_inversion = true
scale_infos = Array[Resource("res://levels/scale_info.gd")]([ExtResource("18_wdpug"), ExtResource("19_375dd"), ExtResource("20_1ykna"), ExtResource("21_l2rt3"), ExtResource("22_f0aur"), ExtResource("23_icpk3"), ExtResource("24_we8ay"), ExtResource("25_sel56"), ExtResource("26_8j8hq"), ExtResource("27_dk7fx"), ExtResource("28_deyo0"), ExtResource("29_cu4kb"), ExtResource("30_1jv20"), ExtResource("31_acmfr"), ExtResource("32_0wo1y"), ExtResource("33_qtvj2"), ExtResource("34_f2anf"), ExtResource("35_50pp8"), ExtResource("36_pxh7t"), ExtResource("37_kknqh"), ExtResource("38_rx6dy"), ExtResource("39_j0x8n"), ExtResource("40_42jqr"), ExtResource("41_ktbga"), ExtResource("42_4y3mq")])
stage_count_max = 7
notes_per_stage_max = 2
sequence_length_max = 8
level_scene_path = "res://levels/world_a6.tscn"
regenerate = true

[node name="Main" type="Node2D"]
script = ExtResource("1_dgxr5")

[node name="PostFX" type="CanvasLayer" parent="."]
process_mode = 3
layer = 50
visible = false

[node name="TextureRect" type="TextureRect" parent="PostFX"]
material = ExtResource("2_l5wfl")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = SubResource("GradientTexture2D_3r7dh")

[node name="Transition" type="CanvasLayer" parent="."]
layer = 80
script = ExtResource("3_ny1lb")
master_volume = -80.0

[node name="ColorRect" type="ColorRect" parent="Transition"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Transition"]
libraries = {
"": SubResource("AnimationLibrary_2k50g")
}

[node name="FadeOutTimer" type="Timer" parent="Transition"]
one_shot = true

[node name="HUD" parent="." instance=ExtResource("2_tqktt")]
process_mode = 3
layer = 100

[node name="InGameMenu" parent="." instance=ExtResource("3_woyqp")]
process_mode = 3
layer = 100
visible = false

[node name="LevelManager" type="Node" parent="."]
script = ExtResource("6_10awd")
level_infos = Array[Resource("res://levels/level_info.gd")]([ExtResource("7_6lnhu"), ExtResource("8_j0ghc"), ExtResource("9_tx7u8"), ExtResource("7_swa47"), ExtResource("7_swa47"), ExtResource("7_swa47"), ExtResource("7_swa47"), ExtResource("9_0vo6u"), ExtResource("9_0vo6u"), ExtResource("9_0vo6u"), ExtResource("9_0vo6u"), ExtResource("10_v8k3x"), ExtResource("10_v8k3x"), ExtResource("10_v8k3x"), ExtResource("10_v8k3x"), ExtResource("11_xqxel"), ExtResource("10_dypps"), ExtResource("10_dypps"), ExtResource("10_dypps"), ExtResource("11_e8qcc"), ExtResource("11_e8qcc"), ExtResource("11_e8qcc"), ExtResource("11_e8qcc"), ExtResource("12_hm2f0"), ExtResource("12_hm2f0"), ExtResource("12_hm2f0"), ExtResource("12_hm2f0"), ExtResource("13_a5w1c"), ExtResource("13_a5w1c"), ExtResource("13_a5w1c"), ExtResource("13_a5w1c"), ExtResource("14_tvlkx"), ExtResource("14_tvlkx"), ExtResource("14_tvlkx"), ExtResource("14_tvlkx"), ExtResource("17_qqbmw"), ExtResource("15_uux5b"), ExtResource("15_uux5b"), ExtResource("15_uux5b"), SubResource("Resource_qn6nn"), SubResource("Resource_4iyos"), SubResource("Resource_gaviw")])

[connection signal="finished" from="Transition" to="." method="_on_transition_finished"]
[connection signal="timeout" from="Transition/FadeOutTimer" to="." method="_on_fade_out_timer_timeout"]
[connection signal="igm_pressed" from="HUD" to="." method="_on_hud_igm_pressed"]
[connection signal="skip_tutorial_pressed" from="HUD" to="." method="_on_hud_skip_tutorial_pressed"]
[connection signal="closed" from="InGameMenu" to="." method="_on_in_game_menu_closed"]
